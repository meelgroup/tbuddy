#!/usr/bin/python

# Convert integer equations generated by constraint generator into mod-2 equations
# Add g command at end

import sys

maxVar = 0
ecount = 0

for line in sys.stdin:

    if len(line) > 0 and line[0] == '=':
        ecount += 1
        fields = line.split(' ')
        for field in fields[2:]:
            var = int(field.split('.')[1])
            maxVar = max(var, maxVar)
        line = line[0] + '2' + line[1:]
    sys.stdout.write(line)

slist = ['g', str(ecount)] + [str(v) for v in range(1,maxVar+1)]
sys.stdout.write(" ".join(slist) + '\n')
